---
import { ViewTransitions } from "astro:transitions";
import "@/styles/global.css";
const {
  title = "Mohammed Asrar Ali — Software Developer & CS Student",
  description = "Software Developer at Trend Micro. Portfolio showcasing RAG applications, ML projects, and full-stack development."
} = Astro.props;
import config from "../../site.config.json";
const currentPath = Astro.url.pathname;
---
<!doctype html>
<html lang="en" class="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="theme-color" content="#09090b" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://asrar-ali.github.io" />
    <meta property="og:image" content="https://asrar-ali.github.io/og.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content="https://asrar-ali.github.io/og.png" />
    <link rel="icon" href="/favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <ViewTransitions />
  </head>
  <body class="bg-surface-0 text-zinc-100 antialiased noise-overlay font-body">
    <a href="#main" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-brand-600 text-white px-4 py-2 rounded-lg z-50">Skip to content</a>

    <!-- ── Navigation ── -->
    <header class="fixed top-0 left-0 right-0 z-40 backdrop-blur-xl bg-surface-0/80 border-b border-surface-200/50">
      <div class="max-w-5xl mx-auto px-6 py-4 flex items-center justify-between">
        <a href="/" class="font-display font-semibold text-lg tracking-tight hover:text-brand-400 transition-colors">
          asrar<span class="text-brand-500">.</span>
        </a>

        <!-- Desktop nav -->
        <nav class="hidden md:flex items-center gap-6 text-sm text-zinc-400">
          <a href="/projects" class={`link-underline hover:text-zinc-100 transition-colors ${currentPath.startsWith('/projects') ? 'text-zinc-100' : ''}`}>projects</a>
          <a href="/experience" class={`link-underline hover:text-zinc-100 transition-colors ${currentPath.startsWith('/experience') ? 'text-zinc-100' : ''}`}>experience</a>
          <a href="/about" class={`link-underline hover:text-zinc-100 transition-colors ${currentPath.startsWith('/about') ? 'text-zinc-100' : ''}`}>about</a>
          <a href="/resume.pdf" target="_blank" rel="noopener" class="link-underline hover:text-zinc-100 transition-colors">resume</a>
          <a href="/contact" class={`px-3 py-1.5 rounded-lg border hover:border-brand-500 hover:text-brand-400 transition-all ${currentPath.startsWith('/contact') ? 'border-brand-500 text-brand-400' : 'border-surface-300 text-zinc-300'}`}>
            contact
          </a>
        </nav>

        <!-- Mobile hamburger -->
        <button id="menuToggle" class="md:hidden p-2 text-zinc-400 hover:text-zinc-100 transition-colors" aria-label="Toggle menu">
          <svg class="w-5 h-5" id="menuOpen" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" d="M4 6h16M4 12h16M4 18h16"/></svg>
          <svg class="w-5 h-5 hidden" id="menuClose" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
      </div>

      <!-- Mobile menu -->
      <nav id="mobileMenu" class="hidden md:hidden border-t border-surface-200/50 bg-surface-0/95 backdrop-blur-xl">
        <div class="max-w-5xl mx-auto px-6 py-4 flex flex-col gap-4 text-sm">
          <a href="/projects" class={`hover:text-zinc-100 transition-colors ${currentPath.startsWith('/projects') ? 'text-brand-400' : 'text-zinc-400'}`}>projects</a>
          <a href="/experience" class={`hover:text-zinc-100 transition-colors ${currentPath.startsWith('/experience') ? 'text-brand-400' : 'text-zinc-400'}`}>experience</a>
          <a href="/about" class={`hover:text-zinc-100 transition-colors ${currentPath.startsWith('/about') ? 'text-brand-400' : 'text-zinc-400'}`}>about</a>
          <a href="/resume.pdf" target="_blank" rel="noopener" class="text-zinc-400 hover:text-zinc-100 transition-colors">resume</a>
          <a href="/contact" class={`hover:text-zinc-100 transition-colors ${currentPath.startsWith('/contact') ? 'text-brand-400' : 'text-zinc-400'}`}>contact</a>
        </div>
      </nav>
    </header>

    <!-- ── Main ── -->
    <main id="main" class="pt-20 max-w-5xl mx-auto px-6">
      <slot />
    </main>

    <!-- ── Footer ── -->
    <footer class="mt-32 border-t border-surface-200/50">
      <div class="max-w-5xl mx-auto px-6 py-12">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
          <div>
            <p class="font-display font-semibold text-lg">
              asrar<span class="text-brand-500">.</span>
            </p>
            <p class="text-sm text-zinc-500 mt-1 font-mono">Nah, I'd deploy.</p>
          </div>
          <div class="flex items-center gap-6 text-sm text-zinc-400">
            <a href={config.socials.github} target="_blank" rel="noopener" class="link-underline hover:text-zinc-100 transition-colors" aria-label="GitHub">GitHub</a>
            <a href={config.socials.linkedin} target="_blank" rel="noopener" class="link-underline hover:text-zinc-100 transition-colors" aria-label="LinkedIn">LinkedIn</a>
            <a href={"mailto:"+config.email} class="link-underline hover:text-zinc-100 transition-colors" aria-label="Email">Email</a>
          </div>
        </div>
        <div class="section-line mt-8 mb-4"></div>
        <p class="text-xs text-zinc-600">&copy; {new Date().getFullYear()} Mohammed Asrar Ali. Crafted with Astro & Tailwind CSS.</p>
      </div>
    </footer>

    <!-- ── Mobile menu toggle ── -->
    <script is:inline>
      const toggle = document.getElementById('menuToggle');
      const menu = document.getElementById('mobileMenu');
      const openIcon = document.getElementById('menuOpen');
      const closeIcon = document.getElementById('menuClose');
      if (toggle && menu) {
        toggle.addEventListener('click', () => {
          const isOpen = !menu.classList.contains('hidden');
          menu.classList.toggle('hidden');
          openIcon.classList.toggle('hidden');
          closeIcon.classList.toggle('hidden');
        });
      }
    </script>

    <!-- ── Scroll reveal ── -->
    <script is:inline>
      document.documentElement.classList.add('js-reveal');
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

      document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
    </script>
  </body>
</html>
